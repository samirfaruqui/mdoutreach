<!DOCTYPE html>
<html>
<head>
    <title>Employee SpeakUp Platform</title>
    <style>
        body { font-family: Arial; padding: 40px; }
        button { padding: 12px 20px; font-size: 16px; margin-top: 20px; }
        input { padding: 10px; width: 280px; margin: 5px 0; }
    </style>
</head>

<body>
    <h2>Employee SpeakUp Platform</h2>
    <p>Choose how you want to start:</p>

    <button onclick="location.href='new-case.html'">
        Start a New Case
    </button>

    <hr><br>

    <h3>Continue an Existing Case</h3>

    <input id="caseId" placeholder="Case ID"><br>
    <input id="passcode" placeholder="Passcode"><br>

    <button onclick="continueCase()">Continue</button>

    <script>
        async function continueCase() {
            const caseId = document.getElementById("caseId").value.trim();
            const passcode = document.getElementById("passcode").value.trim();

            if (!caseId || !passcode) return alert("Enter both Case ID & Passcode");

            const res = await fetch("/api/verifyCase", {
                method: "POST",
                body: JSON.stringify({ caseId, passcode })
            });

            const data = await res.json();
            if (!data.success) return alert("Invalid Case ID or Passcode");

            // Redirect to chat
            localStorage.setItem("caseId", caseId);
            localStorage.setItem("passcode", passcode);
            localStorage.setItem("mode", data.mode);

            location.href = "chat.html";
        }
    </script>
</body>
</html>
